[tox]
envlist = py27,py34

[testenv]

commands =
    make clean
    coverage: coverage run --source grab \
    ./runtest.py --test-all \
        --backend-mongo --backend-mysql --backend-redis --backend-postgres \
    mp: --mp-mode \
    urllib3: --grab-transport=urllib3 --spider-transport=threaded \
    {posargs}

deps = 
    -rrequirements_dev.txt
    -rrequirements_dev_backend.txt

[testenv:py27-nobackend]
commands =
    make clean
    ./runtest.py --test-all
deps =
    -rrequirements_dev.txt

[testenv:py-appveyor]
#passenv = ProgramFiles APPVEYOR LOGNAME USER LNAME USERNAME HOME USERPROFILE PATH INCLUDE LIB
commands =
    {envpython} runtest.py --test-all --backend-mongo
deps =
    #https://gist.github.com/jdemaeyer/36d27f9b57f6e33bae0d/raw/b1b3cd5f557226ea614de261c01a4e91102a8e67/lxml-3.5.0-cp27-none-win_amd64.whl
    lxml-binaries/lxml-3.5.0-cp27-none-win_amd64.whl
    pycurl
    pyquery
    -rrequirements_dev.txt
    -rrequirements_dev_backend.txt
